<div class="well logs">
	<h1 translate="logs.title">Logs</h1>
	<form novalidate name="form" role="form">
		<div class="row">
			<div class="form-group col-md-4">
				<div class="input-group">
					<span class="input-group-btn" uib-dropdown is-open="isOpen" auto-close="disabled">>
						<button type="button" class="btn btn-default" uib-dropdown-toggle><i class="glyphicon glyphicon-calendar"></i></button>
						<ul uib-dropdown-menu>
							<li>
							<div class="form-group" ng-class="{ 'has-error': form.from.$dirty && form.from.$invalid }">
								<label for="from" translate="logs.field.from">To</label>
								<div class="input-group">
									<span class="input-group-btn">
										<button type="button" class="btn btn-default" ng-click="fromOpen = true"><i class="glyphicon glyphicon-calendar"></i></button>
									</span>
									<input type="text" name="from" class="form-control" datetime-picker="short" ng-model="filter.from" ng-model-options="{ alloInvalid: true }" max-date="filter.to" is-open="fromOpen" required />
								</div>
							</div>
							</li>
							<li>
							<div class="form-group" ng-class="{ 'has-error': form.to.$dirty && form.to.$invalid }">
								<label for="to" translate="logs.field.to">To</label>
								<div class="input-group">
									<span class="input-group-btn">
										<button type="button" class="btn btn-default" ng-click="toOpen = true"><i class="glyphicon glyphicon-calendar"></i></button>
									</span>
									<input type="text" name="to" class="form-control" datetime-picker="short" ng-model="filter.to" ng-model-options="{ alloInvalid: true }" min-date="filter.from" is-open="toOpen" required />
								</div>
							</div>
							</li>
						</ul>
					</span>
					<input type="text" name="dates" class="form-control" placeholder="{{ 'logs.field.dates' | translate }}" ng-model="filter.dates" readonly />
				</div>
			</div>
			<div class="form-group col-md-3">
				<ui-select name="event" ng-model="filter.event" theme="bootstrap" search-enabled="false" title="{{ 'logs.field.event' | translate }}">
				<ui-select-match allow-clear placeholder="{{ 'logs.field.event' | translate }}">{{ $select.selected | translate }}</ui-select-match>
				<ui-select-choices repeat="event in events">{{ event | translate }}</ui-select-choices>
				</ui-select>
			</div>
			<div class="col-md-5 text-right">
				<button class="btn btn-primary" ng-click="view ()" ng-disabled="form.$invalid" translate="logs.btn.view">View</button>
			</div>
		</div>
	</form>
	<table class="table table-striped table-hover table-condensed">
		<thead>
			<tr>
				<td translate="logs.header.event">Event</td>
				<td translate="logs.header.timestamp">Timestamp</td>
				<td translate="logs.header.host">Host</td>
				<td translate="logs.header.data">Data</td>
				<td translate="logs.header.raw">Raw</td>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="log in logData" ng-class="{ danger: 'log' === log.event && -1 !== log.tags.indexOf ('error') }" ng-switch on="log.event">
				<td>{{ log.event }}</td>
				<td>{{ log.timestamp | date: 'short' }}</td>
				<td ng-if="'response' !== log.event">{{ log.host }}</td>
				<td ng-if="'response' === log.event">{{ log.instance }}</td>
				<td ng-switch-when="log">
					<div translate="logs.data.tags">Tags</div>
					<ul class="list-inline">
						<li ng-repeat="tag in log.tags">{{ tag }}</li>
					</ul>
					<div translate="logs.data.data">Data</div>
					<ul class="list-unstyled">
						<li ng-repeat="(key, value) in log.data">{{ key }}: {{ value }}</li>
					</ul>
				</td>
				<td ng-switch-when="ops">
					<div><strong translate="logs.data.os">OS</strong></div>
					<ul class="list-unstyled">
						<li><span translate="logs.data.load">Load</span>: {{ log.os.load | number: 2 }}</li>
						<li><span translate="logs.data.totalMem">Total Memory</span>: {{ log.os.mem.total | memory }}</li>
						<li><span translate="logs.data.freeMem">Free Memory</span>: {{ log.os.mem.free | memory }}</li>
						<li><span translate="logs.data.uptime">Uptime</span>: {{ log.os.uptime | memory }}</li>
					</ul>
					<div><strong translate="logs.data.proc">Proc</strong></div>
					<ul class="list-unstyled">
						<li><span translate="logs.data.uptime">Uptime</span>: {{ log.proc.uptime | number: 2 }}</li>
						<li><span translate="logs.data.rssMem">RSS Memory</span>: {{ log.proc.mem.rss | memory }}</li>
						<li><span translate="logs.data.heapTotalMemory">Total Heap Memory</span>: {{ log.proc.mem.heapTotal | memory }}</li>
						<li><span translate="logs.data.heapUsedMemory">Used Heap Memory</span>: {{ log.proc.mem.heapUsed | memory }}</li>
						<li><span translate="logs.data.delay">Delay</span>: {{ log.proc.delay | number: 2 }}</li>
					</ul>
					<div><strong translate="logs.data.load">Load</strong></div>
					<div ng-repeat-start="(port, data) in log.load.requests" >&nbsp;&nbsp;<strong translate="logs.data.requests">Requests</strong> ({{ port }})</div>
					<ul class="list-unstyled" ng-repeat-end>
						<li>&nbsp;&nbsp;<span translate="logs.data.total">Total</span>: {{ data.total }}</li>
						<li>&nbsp;&nbsp;<span translate="logs.data.disconnects">Disconnects</span>: {{ data.disconnects }}</li>
						<li ng-repeat="(code, value) in data.statusCode">&nbsp;&nbsp;<span translate="logs.data.statusCode">Status Code</span> {{ code }}: {{ value }}</li>
					</ul>
					<div>&nbsp;&nbsp;<strong translate="logs.data.concurrents">Concurrents</strong></div>
					<ul class="list-unstyled">
						<li ng-repeat="(port, value) in log.data.load.concurrents">&nbsp;&nbsp;{{ port }}: {{ value }}</li>
					</ul>
					<div ng-repeat-start="(port, data) in log.load.responseTimes" >&nbsp;&nbsp;<strong translate="logs.data.responseTimes">Response Times</strong> ({{ port }})</div>
					<ul class="list-unstyled" ng-repeat-end>
						<li>&nbsp;&nbsp;<span translate="logs.data.avg">Average</span>: {{ data.avg | number: 2 }}</li>
						<li>&nbsp;&nbsp;<span translate="logs.data.max">Max</span>: {{ data.max }}</li>
					</ul>
					<div>&nbsp;&nbsp;<strong translate="logs.data.sockets">Sockets</strong></div>
					<ul class="list-unstyled">
						<li ng-repeat="(port, data) in log.load.sockets">&nbsp;&nbsp;{{ port }}: {{ data.total }}</li>
					</ul>
				</td>
				<td ng-switch-when="response">
					<div translate="logs.data.labels">Labels</div>
					<ul class="list-inline">
						<li ng-repeat="tag in log.labels">{{ tag }}</li>
					</ul>
					<div><span translate="logs.data.path">Path</span>: {{ log.path }}</div>
					<div><span translate="logs.data.method">Method</span>: {{ log.method | uppercase }}</div>
					<div translate="logs.data.query">Query</div>
					<ul class="list-inline">
						<li ng-repeat="(key, value) in log.query">{{ key }}: {{ value }}</li>
					</ul>
					<div><span translate="logs.data.responseTime">Response Time</span>: {{ log.responseTime }}ms</div>
					<div><span translate="logs.data.statusCode">Status Code</span>: {{ log.statusCode }}</div>
					<div><span translate="logs.data.httpVersion">HTTP Version</span>: {{ log.httpVersion }}</div>
					<div><span translate="logs.data.remoteAddresss">Remote Address</span>: {{ log.source.remoteAddress}}</div>
					<div><span translate="logs.data.userAgent">User Agent</span>: {{ log.source.userAgent}}</div>
					<div><span translate="logs.data.referer">Referer</span>: {{ log.source.referer }}</div>
				</td>
				<td ng-switch-when="request">
					<div translate="logs.data.tags">Tags</div>
					<ul class="list-inline">
						<li ng-repeat="tag in log.tags">{{ tag }}</li>
					</ul>
					<div><span translate="logs.data.method">Method</span>: {{ log.method | uppercase }}</div>
					<div><span translate="logs.data.path">Path</span>: {{ log.path }}</div>
					<div translate="logs.data.data">Data</div>
					<pre>{{ log.dtata }}</pre>
				<td>
					<button ng-click="raw ($index)" type="button" class="btn btn-default">
						<span class="glyphicon glyphicon-open-file"></span>
					</button>
				</td>
			</tr>
		</tbody>
	</table>
</div>
